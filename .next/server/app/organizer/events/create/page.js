(()=>{var e={};e.id=733,e.ids=[733],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7710:(e,a,s)=>{"use strict";s.r(a),s.d(a,{"40acc5280c85c367f583f29d6339cc86ea7f2b23d5":()=>t.K,"607f4330830bd57a7377259a071e5adb3300019451":()=>r.R,"70e892a1089d9d2f972f4e3bb381c2465b852fafe0":()=>r.i});var r=s(8842),t=s(16738)},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},23911:(e,a,s)=>{Promise.resolve().then(s.bind(s,94771))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},35265:(e,a,s)=>{"use strict";s.d(a,{A:()=>r});let r=(0,s(82614).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},54175:(e,a,s)=>{Promise.resolve().then(s.bind(s,62987))},55511:e=>{"use strict";e.exports=require("crypto")},62987:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>q});var r=s(60687),t=s(27605),i=s(63442),o=s(45880),l=s(29867),n=s(16189),d=s(11516),c=s(55817),m=s(35265),p=s(26622),u=s(24026),v=s(41936),h=s(83729),x=s(43210),g=s(63213),b=s(6475);let f=(0,b.createServerReference)("607f4330830bd57a7377259a071e5adb3300019451",b.callServer,void 0,b.findSourceMapURL,"createEventAction");var j=s(42244),_=s(40988),N=s(26373),E=s(73437),P=s(94229),w=s(4780),y=s(30474),k=s(66420);let C=/^\d{5}-?\d{3}$/,A=o.Ik({nome_evento:o.Yj().min(3,{message:"Nome do evento deve ter pelo menos 3 caracteres."}),descricao:o.Yj().min(10,{message:"Descri\xe7\xe3o deve ter pelo menos 10 caracteres."}),data_horario_date:o.p6({required_error:"Data do evento \xe9 obrigat\xf3ria."}),data_horario_time:o.Yj().regex(/^([01]\d|2[0-3]):([0-5]\d)$/,{message:"Formato de hora inv\xe1lido (HH:MM)."}),nome_local_evento:o.Yj().min(3,{message:"Nome do local do evento deve ter pelo menos 3 caracteres."}).optional().or(o.eu("")),cep:o.Yj().regex(C,{message:"CEP inv\xe1lido (formato XXXXX-XXX ou XXXXXXXX)."}),local:o.Yj().min(5,{message:"Endere\xe7o (Rua, Bairro, N\xfamero) deve ter pelo menos 5 caracteres."}),cidade:o.Yj().min(3,{message:"Cidade \xe9 obrigat\xf3ria e deve ter pelo menos 3 caracteres."}),preco_ingresso:o.au.number().min(0,{message:"Pre\xe7o deve ser um valor positivo ou zero."}),quantidade_total:o.au.number().int().min(1,{message:"Quantidade deve ser pelo menos 1."}),imagem_url:o.Yj().optional().refine(e=>!e||e.startsWith("data:image/"),{message:"Formato de imagem inv\xe1lido. Use o upload."})});function q(){let{toast:e}=(0,l.dj)(),a=(0,n.useRouter)(),{organizerUser:s,isLoading:o}=(0,g.A)(),[b,q]=(0,x.useState)(!1),[F,$]=(0,x.useState)(!1),[z,X]=(0,x.useState)(null),{register:M,handleSubmit:G,control:I,formState:{errors:R},setError:S,setValue:T,watch:B}=(0,t.mN)({resolver:(0,i.u)(A),defaultValues:{nome_evento:"",descricao:"",data_horario_date:void 0,data_horario_time:"18:00",nome_local_evento:"",cep:"",local:"",cidade:"",preco_ingresso:0,quantidade_total:100,imagem_url:""}}),D=B("cep"),O=async()=>{if(!D||!C.test(D)){e({title:"CEP Inv\xe1lido",description:"Por favor, insira um CEP v\xe1lido.",variant:"destructive"});return}$(!0);let a=await (0,j.K)(D);$(!1),a.success&&a.data?(T("cidade",a.data.localidade,{shouldValidate:!0}),T("local",`${a.data.logradouro}${a.data.bairro?`, ${a.data.bairro}`:""}`,{shouldValidate:!0}),e({title:"CEP Encontrado!",description:"Cidade e endere\xe7o (rua/bairro) preenchidos."})):e({title:"Erro ao Buscar CEP",description:a.error||"N\xe3o foi poss\xedvel buscar o CEP.",variant:"destructive"})};if(o)return(0,r.jsx)("div",{className:"d-flex align-items-center justify-content-center min-vh-100",children:(0,r.jsx)(d.A,{className:"h-12 w-12 animate-spin text-primary"})});if(!s)return a.replace("/login?redirect=/organizer/dashboard"),null;let V=async r=>{if(!s?.id){e({title:"Erro de Autentica\xe7\xe3o",description:"Organizador n\xe3o identificado. Fa\xe7a login novamente.",variant:"destructive"});return}q(!0);let{data_horario_date:t,data_horario_time:i,...o}=r,[l,n]=i.split(":").map(Number),d=new Date(t);d.setHours(l,n);let c={...o,nome_local_evento:r.nome_local_evento||void 0,data_horario:d.toISOString(),imagem_url:r.imagem_url||void 0},m=await f(c,s.id);q(!1),m.success&&m.event?(e({title:"Evento Criado!",description:`O evento "${m.event.nome_evento}" foi criado com sucesso.`,variant:"default"}),a.push("/organizer/dashboard")):(e({title:"Falha ao Criar Evento",description:m.error||"Verifique os campos e tente novamente.",variant:"destructive"}),m.fieldErrors&&Object.entries(m.fieldErrors).forEach(([e,a])=>{S(e,{type:"server",message:a})}))};return(0,r.jsxs)("div",{className:"container-fluid container-md py-4 py-md-5",children:[(0,r.jsxs)("button",{onClick:()=>a.back(),className:"btn btn-secondary mb-4 d-flex align-items-center gap-2",children:[(0,r.jsx)(c.A,{className:"h-4 w-4"})," Voltar para o Painel"]}),(0,r.jsxs)("div",{className:"card border",children:[" ",(0,r.jsxs)("div",{className:"card-header p-3 p-md-4 bg-light",children:[(0,r.jsxs)("h1",{className:"card-title fs-2 fw-bold text-primary d-flex align-items-center gap-2",children:[(0,r.jsx)(m.A,{className:"h-8 w-8"})," Criar Novo Evento"]}),(0,r.jsx)("p",{className:"card-text text-muted",children:"Preencha os detalhes abaixo para cadastrar um novo evento. Pagamentos ser\xe3o processados via Mercado Pago."})]}),(0,r.jsx)("div",{className:"card-body p-3 p-md-4",children:(0,r.jsxs)("form",{onSubmit:G(V),className:"needs-validation",noValidate:!0,children:[(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"nome_evento",className:"form-label",children:"Nome do Evento"}),(0,r.jsx)("input",{id:"nome_evento",...M("nome_evento"),className:`form-control ${R.nome_evento?"is-invalid":""}`}),R.nome_evento&&(0,r.jsx)("div",{className:"invalid-feedback",children:R.nome_evento.message})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"descricao",className:"form-label",children:"Descri\xe7\xe3o"}),(0,r.jsx)("textarea",{id:"descricao",...M("descricao"),className:`form-control ${R.descricao?"is-invalid":""}`,rows:4}),R.descricao&&(0,r.jsx)("div",{className:"invalid-feedback",children:R.descricao.message})]}),(0,r.jsxs)("div",{className:"row g-3 mb-3",children:[(0,r.jsxs)("div",{className:"col-md-6",children:[(0,r.jsx)("label",{htmlFor:"data_horario_date",className:"form-label",children:"Data do Evento"}),(0,r.jsx)(t.xI,{name:"data_horario_date",control:I,render:({field:e})=>(0,r.jsxs)(_.AM,{children:[(0,r.jsx)(_.Wv,{asChild:!0,children:(0,r.jsxs)("button",{type:"button",className:(0,w.cn)("form-control text-start d-flex align-items-center",!e.value&&"text-muted"),children:[(0,r.jsx)(p.A,{className:"me-2 h-4 w-4"}),e.value?(0,E.GP)(e.value,"PPP",{locale:P.F}):(0,r.jsx)("span",{children:"Escolha uma data"})]})}),(0,r.jsxs)(_.hl,{className:"w-auto p-0",children:[" ",(0,r.jsx)(N.V,{mode:"single",selected:e.value,onSelect:e.onChange,initialFocus:!0,locale:P.F,disabled:e=>e<new Date(new Date().setHours(0,0,0,0))})]})]})}),R.data_horario_date&&(0,r.jsx)("div",{className:"text-danger small mt-1",children:R.data_horario_date.message})]}),(0,r.jsxs)("div",{className:"col-md-6",children:[(0,r.jsx)("label",{htmlFor:"data_horario_time",className:"form-label",children:"Hor\xe1rio (HH:MM)"}),(0,r.jsx)("input",{id:"data_horario_time",type:"time",...M("data_horario_time"),className:`form-control ${R.data_horario_time?"is-invalid":""}`}),R.data_horario_time&&(0,r.jsx)("div",{className:"invalid-feedback",children:R.data_horario_time.message})]})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"nome_local_evento",className:"form-label",children:"Nome do Local do Evento (Opcional)"}),(0,r.jsxs)("div",{className:"input-group",children:[(0,r.jsx)("span",{className:"input-group-text",children:(0,r.jsx)(u.A,{className:"h-5 w-5 text-muted"})}),(0,r.jsx)("input",{id:"nome_local_evento",...M("nome_local_evento"),className:`form-control ${R.nome_local_evento?"is-invalid":""}`,placeholder:"Ex: Gin\xe1sio Esportivo Municipal"}),R.nome_local_evento&&(0,r.jsx)("div",{className:"invalid-feedback",children:R.nome_local_evento.message})]})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"cep",className:"form-label",children:"CEP"}),(0,r.jsxs)("div",{className:"input-group",children:[(0,r.jsx)("input",{id:"cep",...M("cep"),className:`form-control ${R.cep?"is-invalid":""}`,placeholder:"Ex: 00000-000"}),(0,r.jsxs)("button",{type:"button",onClick:O,disabled:F,className:"btn btn-secondary d-flex align-items-center gap-1",children:[F?(0,r.jsx)(d.A,{className:"h-4 w-4 animate-spin"}):(0,r.jsx)(v.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"d-none d-sm-inline",children:"Buscar"})]}),R.cep&&(0,r.jsx)("div",{className:"invalid-feedback",children:R.cep.message})]})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"cidade",className:"form-label",children:"Cidade"}),(0,r.jsx)("input",{id:"cidade",...M("cidade"),className:`form-control ${R.cidade?"is-invalid":""}`,readOnly:F}),R.cidade&&(0,r.jsx)("div",{className:"invalid-feedback",children:R.cidade.message})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"local",className:"form-label",children:"Endere\xe7o (Rua, Bairro, N\xfamero e Complemento)"}),(0,r.jsx)("input",{id:"local",...M("local"),className:`form-control ${R.local?"is-invalid":""}`,placeholder:"Ex: Rua Exemplo, Bairro Tal, 123 - Apto 4B"}),R.local&&(0,r.jsx)("div",{className:"invalid-feedback",children:R.local.message}),(0,r.jsx)("div",{className:"form-text",children:"Ap\xf3s buscar o CEP, a rua e bairro ser\xe3o preenchidos. Adicione o n\xfamero e complemento."})]}),(0,r.jsxs)("div",{className:"row g-3 mb-3",children:[(0,r.jsxs)("div",{className:"col-md-6",children:[(0,r.jsx)("label",{htmlFor:"preco_ingresso",className:"form-label",children:"Pre\xe7o do Ingresso (R$)"}),(0,r.jsx)("input",{id:"preco_ingresso",type:"number",step:"0.01",...M("preco_ingresso"),className:`form-control ${R.preco_ingresso?"is-invalid":""}`}),R.preco_ingresso&&(0,r.jsx)("div",{className:"invalid-feedback",children:R.preco_ingresso.message}),(0,r.jsxs)("div",{className:"form-text",children:["Ser\xe1 adicionada uma taxa de servi\xe7o de R$ ",k.E.toFixed(2)," por ingresso."]})]}),(0,r.jsxs)("div",{className:"col-md-6",children:[(0,r.jsx)("label",{htmlFor:"quantidade_total",className:"form-label",children:"Quantidade Total de Ingressos"}),(0,r.jsx)("input",{id:"quantidade_total",type:"number",...M("quantidade_total"),className:`form-control ${R.quantidade_total?"is-invalid":""}`}),R.quantidade_total&&(0,r.jsx)("div",{className:"invalid-feedback",children:R.quantidade_total.message})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("label",{htmlFor:"imagem_upload",className:"form-label",children:["Imagem do Evento (Opcional, m\xe1x ",5,"MB)"]}),(0,r.jsxs)("div",{className:"input-group",children:[(0,r.jsx)("input",{id:"imagem_upload",type:"file",accept:"image/png, image/jpeg, image/webp, image/gif",onChange:e=>{let a=e.target.files?.[0];if(a){if(a.size>5242880){S("imagem_url",{message:`Arquivo muito grande. M\xe1ximo 5MB.`}),X(null),T("imagem_url",void 0),e.target.value="";return}let s=new FileReader;s.onloadend=()=>{let e=s.result;T("imagem_url",e,{shouldValidate:!0}),X(e)},s.readAsDataURL(a)}else T("imagem_url",void 0),X(null)},className:`form-control ${R.imagem_url?"is-invalid":""}`}),(0,r.jsx)("span",{className:"input-group-text",children:(0,r.jsx)(h.A,{className:"h-5 w-5 text-muted"})}),R.imagem_url&&(0,r.jsx)("div",{className:"invalid-feedback w-100",children:R.imagem_url.message})]}),z&&(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("label",{className:"form-label",children:"Pr\xe9-visualiza\xe7\xe3o:"}),(0,r.jsx)(y.default,{src:z,alt:"Pr\xe9-visualiza\xe7\xe3o da imagem do evento",width:200,height:100,className:"img-thumbnail object-fit-cover mt-1","data-ai-hint":"event image preview"})]})]}),(0,r.jsxs)("button",{type:"submit",className:"btn btn-accent w-100 btn-lg fw-semibold d-flex align-items-center justify-content-center gap-2",disabled:b||F,children:[b?(0,r.jsx)(d.A,{className:"me-2 h-4 w-4 animate-spin"}):(0,r.jsx)(m.A,{className:"me-2 h-4 w-4"}),"Criar Evento"]})]})})]})]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79551:e=>{"use strict";e.exports=require("url")},79748:e=>{"use strict";e.exports=require("fs/promises")},87769:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>o.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d});var r=s(65239),t=s(48088),i=s(88170),o=s.n(i),l=s(30893),n={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);s.d(a,n);let d={children:["",{children:["organizer",{children:["events",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,94771)),"E:\\xampp\\htdocs\\GIT\\trinkapasss\\src\\app\\organizer\\events\\create\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,71145)),"E:\\xampp\\htdocs\\GIT\\trinkapasss\\src\\app\\organizer\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,21075)),"E:\\xampp\\htdocs\\GIT\\trinkapasss\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["E:\\xampp\\htdocs\\GIT\\trinkapasss\\src\\app\\organizer\\events\\create\\page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/organizer/events/create/page",pathname:"/organizer/events/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},94771:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"E:\\\\xampp\\\\htdocs\\\\GIT\\\\trinkapasss\\\\src\\\\app\\\\organizer\\\\events\\\\create\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"E:\\xampp\\htdocs\\GIT\\trinkapasss\\src\\app\\organizer\\events\\create\\page.tsx","default")}};var a=require("../../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),r=a.X(0,[447,724,20,658,543,105,533,944,899,507,989,978],()=>s(87769));module.exports=r})();
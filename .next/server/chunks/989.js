"use strict";exports.id=989,exports.ids=[989],exports.modules={26222:(e,a,n)=>{n.d(a,{BG:()=>N,Ej:()=>Q,Fg:()=>C,Ng:()=>I,OT:()=>O,TK:()=>T,Vf:()=>D,W2:()=>$,Xr:()=>P,Xx:()=>h,Z8:()=>m,_q:()=>k,gA:()=>j,gt:()=>q,hc:()=>A,ht:()=>J,kQ:()=>g,kl:()=>W,lo:()=>z,mt:()=>y,nu:()=>F,qM:()=>x,ql:()=>U,y7:()=>M,zl:()=>E,zw:()=>S});var t=n(91199);n(42087);var i=n(79748),r=n.n(i),o=n(33873),d=n.n(o),s=n(61803),c=n(33331);let l=d().join(process.cwd(),"src","data"),u=d().join(l,"eventos.json"),f=d().join(l,"vendas.json"),b=d().join(l,"usuarios.json"),w=d().join(l,"settings.json"),_=d().join(l,"withdrawal-requests.json");async function p(e,a){try{await r().access(e)}catch(n){if("ENOENT"===n.code){let n=void 0!==a?a:e.endsWith("s.json")||e.endsWith("os.json")?[]:{};return await r().writeFile(e,JSON.stringify(n,null,2),"utf-8"),n}throw console.error(`Error accessing file ${e}:`,n),n}try{let a=await r().readFile(e,"utf-8");return JSON.parse(a)}catch(n){if(console.error(`Error reading or parsing JSON from ${e}:`,n),void 0!==a)return a;if(e.endsWith("s.json")||e.endsWith("os.json"))return[];throw n}}async function v(e,a){try{let n=JSON.stringify(a,null,2);await r().writeFile(e,n,"utf-8")}catch(a){throw console.error(`Error writing JSON to ${e}:`,a),a}}async function y(){return p(w,{mercadoPagoAccessToken:""})}async function h(e){let a={...await y(),...e};return await v(w,a),a}async function g(){return p(u,[])}async function m(e){return(await g()).find(a=>a.id===e)}async function A(e){return(await g()).filter(a=>a.organizer_id===e)}async function $(e,a){let n=await g(),t={id:`evt-${(0,s.A)()}`,organizer_id:a,...e,quantidade_disponivel:e.quantidade_total,imagem_url:e.imagem_url||void 0,next_sale_reference_number:1};return n.push(t),await v(u,n),t}async function q(e,a){let n=await g(),t=n.findIndex(a=>a.id===e);return -1===t?(console.error(`Event with ID ${e} not found for counter update.`),!1):(n[t].next_sale_reference_number=a,await v(u,n),console.log(`Event ${e} sale reference counter updated to ${a}`),!0)}async function x(e,a,n){let t=await g(),i=t.findIndex(a=>a.id===e);if(-1===i)return console.error(`Event with ID ${e} not found for update.`),null;let r=t[i];if(r.organizer_id!==n)return console.error(`Organizer ${n} does not have permission to update event ${e}.`),null;let o=r.quantidade_total-r.quantidade_disponivel;if(a.quantidade_total<o)return console.error(`Cannot update event ${e}: new total quantity (${a.quantidade_total}) is less than tickets already sold (${o}).`),null;let d=a.quantidade_total-o,s={...r,...a,quantidade_disponivel:d,imagem_url:a.imagem_url||r.imagem_url,next_sale_reference_number:r.next_sale_reference_number||1};return t[i]=s,await v(u,t),s}async function I(e){try{let a=await g();if(!a.some(a=>a.id===e))return{success:!1,message:"Evento n\xe3o encontrado."};a=a.filter(a=>a.id!==e),await v(u,a);let n=await j();return n=n.filter(a=>a.evento_id!==e),await v(f,n),{success:!0}}catch(e){return console.error("Error deleting event and associated sales:",e),{success:!1,message:"Erro ao excluir evento e vendas associadas."}}}async function j(){return p(f,[])}async function k(e){return(await j()).find(a=>a.id===e)}async function E(e){return(await j()).find(a=>a.mercado_pago_external_reference===e)}async function D(e){let a=await j(),n={id:`sale-${(0,s.A)().substring(0,12)}`,...e};return a.push(n),await v(f,a),n}async function S(e,a){let n=await j(),t=n.findIndex(a=>a.id===e);return -1===t?(console.error(`Sale with ID ${e} not found for update.`),null):(n[t]={...n[t],...a},await v(f,n),n[t])}async function N(e){return(await j()).filter(a=>a.evento_id===e)}async function O(e,a,n){let t=await g(),i=t.findIndex(a=>a.id===e);if(-1===i)return console.error(`Event with ID ${e} not found for stock update.`),!1;let r=t[i];if(void 0!==n){if(n<0||n>r.quantidade_total)return console.warn(`Invalid newAvailableQuantity ${n} for event ${e}. Max total: ${r.quantidade_total}.`),!1;r.quantidade_disponivel=n}else{let n=r.quantidade_disponivel-a;if(n<0)return console.warn(`Not enough stock for event ID ${e}. Available: ${r.quantidade_disponivel}, Requested change: ${a}`),!1;n>r.quantidade_total?(console.warn(`Proposed available stock ${n} exceeds total quantity ${r.quantidade_total} for event ${e}. Capping at total.`),r.quantidade_disponivel=r.quantidade_total):r.quantidade_disponivel=n}return t[i]=r,await v(u,t),console.log(`Stock for event ${e} updated. New available: ${r.quantidade_disponivel}`),!0}async function z(){return p(b,[])}async function W(e){return(await z()).find(a=>a.id===e)}async function J(e){return(await z()).find(a=>a.email===e)}async function F(e){let a=await z();return a.push(e),await v(b,a),e}async function T(e,a){let n=await z(),t=n.findIndex(a=>a.id===e);if(-1===t)return console.error(`User with ID ${e} not found for update.`),null;let i={...n[t]};return void 0!==a.nome&&(i.nome=a.nome),void 0!==a.email&&(i.email=a.email),void 0!==a.whatsapp&&(i.whatsapp=a.whatsapp),void 0!==a.password_hash&&(i.password_hash=a.password_hash),void 0!==a.pix_key_type&&(i.pix_key_type=""===a.pix_key_type?void 0:a.pix_key_type),void 0!==a.pix_key&&(i.pix_key=""===a.pix_key?void 0:a.pix_key),void 0!==a.id_photo_data_uri&&(i.id_photo_data_uri=""===a.id_photo_data_uri?void 0:a.id_photo_data_uri),void 0!==a.is_verified&&(i.is_verified=a.is_verified),n[t]=i,await v(b,n),i}async function C(e){try{let a=await z();if(!a.some(a=>a.id===e))return{success:!1,message:"Usu\xe1rio n\xe3o encontrado."};return a=a.filter(a=>a.id!==e),await v(b,a),{success:!0}}catch(e){return console.error("Error deleting user:",e),{success:!1,message:"Erro ao excluir usu\xe1rio."}}}async function M(){return p(_,[])}async function P(e){return(await M()).filter(a=>a.organizerId===e)}async function Q(e){let a=await M(),n={id:`wdrl-${(0,s.A)()}`,...e,requestDate:new Date().toISOString(),status:"pending"};return a.push(n),await v(_,a),n}async function U(e,a,n){let t=await M(),i=t.findIndex(a=>a.id===e);return -1===i?(console.error(`Withdrawal request with ID ${e} not found.`),null):("pending"!==t[i].status?console.warn(`Withdrawal request ${e} is already processed. Current status: ${t[i].status}`):(t[i].status=a,t[i].processedDate=new Date().toISOString(),n&&(t[i].adminNotes=n),await v(_,t)),t[i])}(0,c.D)([y,h,g,m,A,$,q,x,I,j,k,E,D,S,N,O,z,W,J,F,T,C,M,P,Q,U]),(0,t.A)(y,"000520d6b503719548fb6bef3dff8ec45fd4e804ce",null),(0,t.A)(h,"40d8847af7df11626312812a1afd1ab7a6f174c135",null),(0,t.A)(g,"005c2d08406700dc152b1561ded4681ff83fdadb8d",null),(0,t.A)(m,"40fe749a8391e6528facea5a25513e9e6e91d9b012",null),(0,t.A)(A,"4074b6739d0532ed98e51e2d88f2f053b4d71e55b9",null),(0,t.A)($,"60036980b5bafb358b05e2382ec6b2c82578bfdeab",null),(0,t.A)(q,"60c7c4de1387c7d0761a4f5314fa34ef12c609fe19",null),(0,t.A)(x,"70dc2fdf7817e715b7ada4867546bafb6f98e31730",null),(0,t.A)(I,"40fbac1940c300bb9f8ee5bad7d11cb575270bff5c",null),(0,t.A)(j,"00c601a634a1c9378df1c44cbefcc642150b349a53",null),(0,t.A)(k,"40f4c98a70820be41d1af3666a880afe9f9224a765",null),(0,t.A)(E,"4056ec7672903b2a8eb3bc0c5488ee94bd01e08212",null),(0,t.A)(D,"40aaa6cf6cf17e830e8f3551c28219a6121d545fb0",null),(0,t.A)(S,"60ccfd18cb390812f69ba04b4a2c39d18cdfacd5f5",null),(0,t.A)(N,"40cef2ed129f2e4ae69d23a580670158fca0857dda",null),(0,t.A)(O,"707c48103324414711b8ea0a94e322b20645c22419",null),(0,t.A)(z,"00bf65ed71343e251550082bbf0339fa8a22b7ed24",null),(0,t.A)(W,"40746f192df6bfe2d0c69fea94ff420b4dd6b9b8bf",null),(0,t.A)(J,"40d046635bbc6baa97a47dc766104ff4e21fb69efa",null),(0,t.A)(F,"40c205b0e33dfc1c686685d22260288319ab1386f5",null),(0,t.A)(T,"60dd176c250848944b1a7f76f9e769d5429c45e57e",null),(0,t.A)(C,"40c6c144facbff83d8b53f3522874415284261c468",null),(0,t.A)(M,"00a276c7296ead0da9cfd04a214f18fcea9396a73a",null),(0,t.A)(P,"40f9a03f67f919322f175220a208bae7cfa1a12511",null),(0,t.A)(Q,"403b0232b3b40821faca75beb72aba1a04e1f84b11",null),(0,t.A)(U,"70d0f99b7427409d8212b0fc9420f3a4673f1bb410",null)},70440:(e,a,n)=>{n.r(a),n.d(a,{default:()=>i});var t=n(31658);let i=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,t.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]}};
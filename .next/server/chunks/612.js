"use strict";exports.id=612,exports.ids=[612],exports.modules={9612:(e,a,n)=>{n.r(a),n.d(a,{"000520d6b503719548fb6bef3dff8ec45fd4e804ce":()=>t.mt,"005c2d08406700dc152b1561ded4681ff83fdadb8d":()=>t.kQ,"00a276c7296ead0da9cfd04a214f18fcea9396a73a":()=>t.y7,"00bf65ed71343e251550082bbf0339fa8a22b7ed24":()=>t.lo,"00c601a634a1c9378df1c44cbefcc642150b349a53":()=>t.gA,"403b0232b3b40821faca75beb72aba1a04e1f84b11":()=>t.Ej,"4056ec7672903b2a8eb3bc0c5488ee94bd01e08212":()=>t.zl,"40746f192df6bfe2d0c69fea94ff420b4dd6b9b8bf":()=>t.kl,"4074b6739d0532ed98e51e2d88f2f053b4d71e55b9":()=>t.hc,"40aaa6cf6cf17e830e8f3551c28219a6121d545fb0":()=>t.Vf,"40c205b0e33dfc1c686685d22260288319ab1386f5":()=>t.nu,"40c6c144facbff83d8b53f3522874415284261c468":()=>t.Fg,"40cef2ed129f2e4ae69d23a580670158fca0857dda":()=>t.BG,"40d046635bbc6baa97a47dc766104ff4e21fb69efa":()=>t.ht,"40d8847af7df11626312812a1afd1ab7a6f174c135":()=>t.Xx,"40f4c98a70820be41d1af3666a880afe9f9224a765":()=>t._q,"40f9a03f67f919322f175220a208bae7cfa1a12511":()=>t.Xr,"40fbac1940c300bb9f8ee5bad7d11cb575270bff5c":()=>t.Ng,"40fe749a8391e6528facea5a25513e9e6e91d9b012":()=>t.Z8,"60036980b5bafb358b05e2382ec6b2c82578bfdeab":()=>t.W2,"60c7c4de1387c7d0761a4f5314fa34ef12c609fe19":()=>t.gt,"60ccfd18cb390812f69ba04b4a2c39d18cdfacd5f5":()=>t.zw,"60dd176c250848944b1a7f76f9e769d5429c45e57e":()=>t.TK,"707c48103324414711b8ea0a94e322b20645c22419":()=>t.OT,"70d0f99b7427409d8212b0fc9420f3a4673f1bb410":()=>t.ql,"70dc2fdf7817e715b7ada4867546bafb6f98e31730":()=>t.qM});var t=n(41609)},41609:(e,a,n)=>{n.d(a,{BG:()=>O,Ej:()=>Q,Fg:()=>X,Ng:()=>k,OT:()=>S,TK:()=>J,Vf:()=>D,W2:()=>q,Xr:()=>M,Xx:()=>h,Z8:()=>m,_q:()=>I,gA:()=>j,gt:()=>$,hc:()=>A,ht:()=>T,kQ:()=>g,kl:()=>W,lo:()=>z,mt:()=>y,nu:()=>F,qM:()=>x,ql:()=>B,y7:()=>C,zl:()=>E,zw:()=>N});var t=n(67218);n(79130);var d=n(79748),i=n.n(d),r=n(33873),f=n.n(r),c=n(46142),o=n(17478);let s=f().join(process.cwd(),"src","data"),l=f().join(s,"eventos.json"),u=f().join(s,"vendas.json"),b=f().join(s,"usuarios.json"),_=f().join(s,"settings.json"),w=f().join(s,"withdrawal-requests.json");async function p(e,a){try{await i().access(e)}catch(n){if("ENOENT"===n.code){let n=void 0!==a?a:e.endsWith("s.json")||e.endsWith("os.json")?[]:{};return await i().writeFile(e,JSON.stringify(n,null,2),"utf-8"),n}throw console.error(`Error accessing file ${e}:`,n),n}try{let a=await i().readFile(e,"utf-8");return JSON.parse(a)}catch(n){if(console.error(`Error reading or parsing JSON from ${e}:`,n),void 0!==a)return a;if(e.endsWith("s.json")||e.endsWith("os.json"))return[];throw n}}async function v(e,a){try{let n=JSON.stringify(a,null,2);await i().writeFile(e,n,"utf-8")}catch(a){throw console.error(`Error writing JSON to ${e}:`,a),a}}async function y(){return p(_,{mercadoPagoAccessToken:""})}async function h(e){let a={...await y(),...e};return await v(_,a),a}async function g(){return p(l,[])}async function m(e){return(await g()).find(a=>a.id===e)}async function A(e){return(await g()).filter(a=>a.organizer_id===e)}async function q(e,a){let n=await g(),t={id:`evt-${(0,c.A)()}`,organizer_id:a,...e,quantidade_disponivel:e.quantidade_total,imagem_url:e.imagem_url||void 0,next_sale_reference_number:1};return n.push(t),await v(l,n),t}async function $(e,a){let n=await g(),t=n.findIndex(a=>a.id===e);return -1===t?(console.error(`Event with ID ${e} not found for counter update.`),!1):(n[t].next_sale_reference_number=a,await v(l,n),console.log(`Event ${e} sale reference counter updated to ${a}`),!0)}async function x(e,a,n){let t=await g(),d=t.findIndex(a=>a.id===e);if(-1===d)return console.error(`Event with ID ${e} not found for update.`),null;let i=t[d];if(i.organizer_id!==n)return console.error(`Organizer ${n} does not have permission to update event ${e}.`),null;let r=i.quantidade_total-i.quantidade_disponivel;if(a.quantidade_total<r)return console.error(`Cannot update event ${e}: new total quantity (${a.quantidade_total}) is less than tickets already sold (${r}).`),null;let f=a.quantidade_total-r,c={...i,...a,quantidade_disponivel:f,imagem_url:a.imagem_url||i.imagem_url,next_sale_reference_number:i.next_sale_reference_number||1};return t[d]=c,await v(l,t),c}async function k(e){try{let a=await g();if(!a.some(a=>a.id===e))return{success:!1,message:"Evento n\xe3o encontrado."};a=a.filter(a=>a.id!==e),await v(l,a);let n=await j();return n=n.filter(a=>a.evento_id!==e),await v(u,n),{success:!0}}catch(e){return console.error("Error deleting event and associated sales:",e),{success:!1,message:"Erro ao excluir evento e vendas associadas."}}}async function j(){return p(u,[])}async function I(e){return(await j()).find(a=>a.id===e)}async function E(e){return(await j()).find(a=>a.mercado_pago_external_reference===e)}async function D(e){let a=await j(),n={id:`sale-${(0,c.A)().substring(0,12)}`,...e};return a.push(n),await v(u,a),n}async function N(e,a){let n=await j(),t=n.findIndex(a=>a.id===e);return -1===t?(console.error(`Sale with ID ${e} not found for update.`),null):(n[t]={...n[t],...a},await v(u,n),n[t])}async function O(e){return(await j()).filter(a=>a.evento_id===e)}async function S(e,a,n){let t=await g(),d=t.findIndex(a=>a.id===e);if(-1===d)return console.error(`Event with ID ${e} not found for stock update.`),!1;let i=t[d];if(void 0!==n){if(n<0||n>i.quantidade_total)return console.warn(`Invalid newAvailableQuantity ${n} for event ${e}. Max total: ${i.quantidade_total}.`),!1;i.quantidade_disponivel=n}else{let n=i.quantidade_disponivel-a;if(n<0)return console.warn(`Not enough stock for event ID ${e}. Available: ${i.quantidade_disponivel}, Requested change: ${a}`),!1;n>i.quantidade_total?(console.warn(`Proposed available stock ${n} exceeds total quantity ${i.quantidade_total} for event ${e}. Capping at total.`),i.quantidade_disponivel=i.quantidade_total):i.quantidade_disponivel=n}return t[d]=i,await v(l,t),console.log(`Stock for event ${e} updated. New available: ${i.quantidade_disponivel}`),!0}async function z(){return p(b,[])}async function W(e){return(await z()).find(a=>a.id===e)}async function T(e){return(await z()).find(a=>a.email===e)}async function F(e){let a=await z();return a.push(e),await v(b,a),e}async function J(e,a){let n=await z(),t=n.findIndex(a=>a.id===e);if(-1===t)return console.error(`User with ID ${e} not found for update.`),null;let d={...n[t]};return void 0!==a.nome&&(d.nome=a.nome),void 0!==a.email&&(d.email=a.email),void 0!==a.whatsapp&&(d.whatsapp=a.whatsapp),void 0!==a.password_hash&&(d.password_hash=a.password_hash),void 0!==a.pix_key_type&&(d.pix_key_type=""===a.pix_key_type?void 0:a.pix_key_type),void 0!==a.pix_key&&(d.pix_key=""===a.pix_key?void 0:a.pix_key),void 0!==a.id_photo_data_uri&&(d.id_photo_data_uri=""===a.id_photo_data_uri?void 0:a.id_photo_data_uri),void 0!==a.is_verified&&(d.is_verified=a.is_verified),n[t]=d,await v(b,n),d}async function X(e){try{let a=await z();if(!a.some(a=>a.id===e))return{success:!1,message:"Usu\xe1rio n\xe3o encontrado."};return a=a.filter(a=>a.id!==e),await v(b,a),{success:!0}}catch(e){return console.error("Error deleting user:",e),{success:!1,message:"Erro ao excluir usu\xe1rio."}}}async function C(){return p(w,[])}async function M(e){return(await C()).filter(a=>a.organizerId===e)}async function Q(e){let a=await C(),n={id:`wdrl-${(0,c.A)()}`,...e,requestDate:new Date().toISOString(),status:"pending"};return a.push(n),await v(w,a),n}async function B(e,a,n){let t=await C(),d=t.findIndex(a=>a.id===e);return -1===d?(console.error(`Withdrawal request with ID ${e} not found.`),null):("pending"!==t[d].status?console.warn(`Withdrawal request ${e} is already processed. Current status: ${t[d].status}`):(t[d].status=a,t[d].processedDate=new Date().toISOString(),n&&(t[d].adminNotes=n),await v(w,t)),t[d])}(0,o.D)([y,h,g,m,A,q,$,x,k,j,I,E,D,N,O,S,z,W,T,F,J,X,C,M,Q,B]),(0,t.A)(y,"000520d6b503719548fb6bef3dff8ec45fd4e804ce",null),(0,t.A)(h,"40d8847af7df11626312812a1afd1ab7a6f174c135",null),(0,t.A)(g,"005c2d08406700dc152b1561ded4681ff83fdadb8d",null),(0,t.A)(m,"40fe749a8391e6528facea5a25513e9e6e91d9b012",null),(0,t.A)(A,"4074b6739d0532ed98e51e2d88f2f053b4d71e55b9",null),(0,t.A)(q,"60036980b5bafb358b05e2382ec6b2c82578bfdeab",null),(0,t.A)($,"60c7c4de1387c7d0761a4f5314fa34ef12c609fe19",null),(0,t.A)(x,"70dc2fdf7817e715b7ada4867546bafb6f98e31730",null),(0,t.A)(k,"40fbac1940c300bb9f8ee5bad7d11cb575270bff5c",null),(0,t.A)(j,"00c601a634a1c9378df1c44cbefcc642150b349a53",null),(0,t.A)(I,"40f4c98a70820be41d1af3666a880afe9f9224a765",null),(0,t.A)(E,"4056ec7672903b2a8eb3bc0c5488ee94bd01e08212",null),(0,t.A)(D,"40aaa6cf6cf17e830e8f3551c28219a6121d545fb0",null),(0,t.A)(N,"60ccfd18cb390812f69ba04b4a2c39d18cdfacd5f5",null),(0,t.A)(O,"40cef2ed129f2e4ae69d23a580670158fca0857dda",null),(0,t.A)(S,"707c48103324414711b8ea0a94e322b20645c22419",null),(0,t.A)(z,"00bf65ed71343e251550082bbf0339fa8a22b7ed24",null),(0,t.A)(W,"40746f192df6bfe2d0c69fea94ff420b4dd6b9b8bf",null),(0,t.A)(T,"40d046635bbc6baa97a47dc766104ff4e21fb69efa",null),(0,t.A)(F,"40c205b0e33dfc1c686685d22260288319ab1386f5",null),(0,t.A)(J,"60dd176c250848944b1a7f76f9e769d5429c45e57e",null),(0,t.A)(X,"40c6c144facbff83d8b53f3522874415284261c468",null),(0,t.A)(C,"00a276c7296ead0da9cfd04a214f18fcea9396a73a",null),(0,t.A)(M,"40f9a03f67f919322f175220a208bae7cfa1a12511",null),(0,t.A)(Q,"403b0232b3b40821faca75beb72aba1a04e1f84b11",null),(0,t.A)(B,"70d0f99b7427409d8212b0fc9420f3a4673f1bb410",null)}};
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[992],{283:(e,a,t)=>{"use strict";t.d(a,{A:()=>l,AuthProvider:()=>i});var s=t(5155),r=t(5695),o=t(2115);let n=(0,o.createContext)(void 0);function i(e){let{children:a}=e,[t,i]=(0,o.useState)(!1),[l,c]=(0,o.useState)(null),[d,m]=(0,o.useState)(!1),[u,p]=(0,o.useState)(null),[g,h]=(0,o.useState)(!0),f=(0,r.useRouter)(),v=(0,r.usePathname)();(0,o.useEffect)(()=>{h(!0);try{let e=localStorage.getItem("isAdminLoggedIn"),a=localStorage.getItem("adminUser");if("true"===e&&a){let e=JSON.parse(a);"admin"===e.tipo?(i(!0),c(e)):(localStorage.removeItem("isAdminLoggedIn"),localStorage.removeItem("adminUser"))}let t=localStorage.getItem("isOrganizerLoggedIn"),s=localStorage.getItem("organizerUser");if("true"===t&&s){let e=JSON.parse(s);"organizer"===e.tipo?(m(!0),p(e)):(localStorage.removeItem("isOrganizerLoggedIn"),localStorage.removeItem("organizerUser"))}}catch(e){console.error("Failed to access localStorage or parse auth data:",e),localStorage.removeItem("isAdminLoggedIn"),localStorage.removeItem("adminUser"),localStorage.removeItem("isOrganizerLoggedIn"),localStorage.removeItem("organizerUser")}h(!1)},[]);let x=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];try{localStorage.removeItem("isAdminLoggedIn"),localStorage.removeItem("adminUser")}catch(e){console.error("Failed to remove admin auth data from localStorage:",e)}i(!1),c(null),e&&v.startsWith("/admin")&&f.push("/login")},S=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];try{localStorage.removeItem("isOrganizerLoggedIn"),localStorage.removeItem("organizerUser")}catch(e){console.error("Failed to remove organizer auth data from localStorage:",e)}m(!1),p(null),e&&v.startsWith("/organizer")&&f.push("/login")};return(0,s.jsx)(n.Provider,{value:{isAdminLoggedIn:t,adminUser:l,setIsAdminLoggedIn:i,setAdminUser:c,adminLogin:e=>{if("admin"!==e.tipo){console.error("Attempted to log in non-admin user as admin.");return}try{localStorage.setItem("isAdminLoggedIn","true"),localStorage.setItem("adminUser",JSON.stringify(e))}catch(e){console.error("Failed to set admin auth data in localStorage:",e)}i(!0),c(e),S(!1)},adminLogout:x,isOrganizerLoggedIn:d,organizerUser:u,setIsOrganizerLoggedIn:m,setOrganizerUser:p,organizerLogin:e=>{if("organizer"!==e.tipo){console.error("Attempted to log in non-organizer user as organizer.");return}try{localStorage.setItem("isOrganizerLoggedIn","true"),localStorage.setItem("organizerUser",JSON.stringify(e))}catch(e){console.error("Failed to set organizer auth data in localStorage:",e)}m(!0),p(e),x(!1)},organizerLogout:S,isLoading:g},children:a})}function l(){let e=(0,o.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1303:(e,a,t)=>{Promise.resolve().then(t.bind(t,3819))},3819:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>S});var s=t(5155),r=t(2177),o=t(221),n=t(5594),i=t(7481),l=t(4477);let c=(0,l.createServerReference)("403c4eca82b923c926c2240499ae2f97ac89bd2512",l.callServer,void 0,l.findSourceMapURL,"organizerRegisterAction");var d=t(283),m=t(6874),u=t.n(m),p=t(5695),g=t(172),h=t(3896),f=t(7104),v=t(2115);let x=n.Ik({nome:n.Yj().min(3,{message:"Nome deve ter pelo menos 3 caracteres."}),email:n.Yj().email({message:"E-mail inv\xe1lido."}),whatsapp:n.Yj().regex(/^\d{10,11}$/,{message:"WhatsApp inv\xe1lido (somente n\xfameros, DDD+N\xfamero)."}),password:n.Yj().min(6,{message:"Senha deve ter pelo menos 6 caracteres."}),confirmPassword:n.Yj()}).refine(e=>e.password===e.confirmPassword,{message:"As senhas n\xe3o coincidem.",path:["confirmPassword"]});function S(){let{toast:e}=(0,i.dj)(),{organizerLogin:a,isOrganizerLoggedIn:t,isLoading:n}=(0,d.A)(),l=(0,p.useRouter)(),[m,S]=(0,v.useState)(!1),{register:y,handleSubmit:j,formState:{errors:N}}=(0,r.mN)({resolver:(0,o.u)(x),defaultValues:{nome:"",email:"",whatsapp:"",password:"",confirmPassword:""}});if((0,v.useEffect)(()=>{!n&&t&&l.replace("/organizer/dashboard")},[n,t,l]),n)return(0,s.jsx)("div",{className:"d-flex align-items-center justify-content-center min-vh-100",style:{marginTop:"-56px"},children:(0,s.jsx)(g.A,{className:"h-12 w-12 animate-spin text-primary"})});if(t)return(0,s.jsxs)("div",{className:"d-flex align-items-center justify-content-center min-vh-100",style:{marginTop:"-56px"},children:[(0,s.jsx)(g.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,s.jsx)("p",{className:"ms-2",children:"Redirecionando..."})]});let b=async t=>{S(!0);let{confirmPassword:s,...r}=t,o=await c({...r,password_hash:t.password});S(!1),o.success&&o.user&&"organizer"===o.userType?(a(o.user),e({title:"Cadastro Bem-Sucedido!",description:"Bem-vindo, ".concat(o.user.nome,"! Voc\xea foi logado automaticamente."),variant:"default"}),l.push("/organizer/dashboard")):e({title:"Falha no Cadastro",description:o.message,variant:"destructive"})};return(0,s.jsx)("div",{className:"d-flex align-items-center justify-content-center min-vh-100 py-5",style:{marginTop:"-56px"},children:(0,s.jsxs)("div",{className:"card border",style:{width:"100%",maxWidth:"550px"},children:[" ",(0,s.jsxs)("div",{className:"card-header p-4 text-center",children:[(0,s.jsxs)("h1",{className:"card-title fs-2 fw-bold text-primary d-flex align-items-center justify-content-center gap-2",children:[(0,s.jsx)(h.A,{className:"h-8 w-8"})," Cadastro de Organizador"]}),(0,s.jsx)("p",{className:"card-text text-muted",children:"Crie sua conta para come\xe7ar a gerenciar seus eventos."})]}),(0,s.jsxs)("div",{className:"card-body p-4 p-md-5",children:[(0,s.jsxs)("form",{onSubmit:j(b),className:"needs-validation",noValidate:!0,children:[(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"nome",className:"form-label",children:"Nome da Empresa/Organizador"}),(0,s.jsx)("input",{id:"nome",...y("nome"),className:"form-control ".concat(N.nome?"is-invalid":"")}),N.nome&&(0,s.jsx)("div",{className:"invalid-feedback",children:N.nome.message})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"email",className:"form-label",children:"E-mail de Contato"}),(0,s.jsx)("input",{id:"email",type:"email",...y("email"),className:"form-control ".concat(N.email?"is-invalid":"")}),N.email&&(0,s.jsx)("div",{className:"invalid-feedback",children:N.email.message})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"whatsapp",className:"form-label",children:"WhatsApp (com DDD, somente n\xfameros)"}),(0,s.jsx)("input",{id:"whatsapp",type:"tel",...y("whatsapp"),className:"form-control ".concat(N.whatsapp?"is-invalid":""),placeholder:"Ex: 11988887777"}),N.whatsapp&&(0,s.jsx)("div",{className:"invalid-feedback",children:N.whatsapp.message})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("label",{htmlFor:"password",className:"form-label",children:"Senha"}),(0,s.jsx)("input",{id:"password",type:"password",...y("password"),className:"form-control ".concat(N.password?"is-invalid":"")}),N.password&&(0,s.jsx)("div",{className:"invalid-feedback",children:N.password.message})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{htmlFor:"confirmPassword",className:"form-label",children:"Confirmar Senha"}),(0,s.jsx)("input",{id:"confirmPassword",type:"password",...y("confirmPassword"),className:"form-control ".concat(N.confirmPassword?"is-invalid":"")}),N.confirmPassword&&(0,s.jsx)("div",{className:"invalid-feedback",children:N.confirmPassword.message})]}),(0,s.jsxs)("button",{type:"submit",className:"btn btn-primary w-100 btn-lg fw-semibold",disabled:m,children:[m?(0,s.jsx)(g.A,{className:"me-2 h-4 w-4 animate-spin"}):(0,s.jsx)(h.A,{className:"me-2 h-4 w-4"}),"Cadastrar"]})]}),(0,s.jsx)("div",{className:"mt-4 text-center",children:(0,s.jsxs)("p",{className:"text-muted small",children:["J\xe1 possui uma conta?"," ",(0,s.jsxs)(u(),{href:"/login",className:"btn btn-secondary btn-sm text-decoration-none",children:[(0,s.jsx)(f.A,{className:"me-1 h-4 w-4"})," Fa\xe7a Login"]})]})})]})]})})}},3896:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(157).A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},5695:(e,a,t)=>{"use strict";var s=t(8999);t.o(s,"useParams")&&t.d(a,{useParams:function(){return s.useParams}}),t.o(s,"usePathname")&&t.d(a,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}})},6654:(e,a,t)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"useMergedRef",{enumerable:!0,get:function(){return r}});let s=t(2115);function r(e,a){let t=(0,s.useRef)(null),r=(0,s.useRef)(null);return(0,s.useCallback)(s=>{if(null===s){let e=t.current;e&&(t.current=null,e());let a=r.current;a&&(r.current=null,a())}else e&&(t.current=o(e,s)),a&&(r.current=o(a,s))},[e,a])}function o(e,a){if("function"!=typeof e)return e.current=a,()=>{e.current=null};{let t=e(a);return"function"==typeof t?t:()=>e(null)}}("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),e.exports=a.default)},7104:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(157).A)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]])},7481:(e,a,t)=>{"use strict";t.d(a,{dj:()=>u});var s=t(2115);let r=0,o=new Map,n=e=>{if(o.has(e))return;let a=setTimeout(()=>{o.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,a)},i=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?n(t):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},l=[],c={toasts:[]};function d(e){c=i(c,e),l.forEach(e=>{e(c)})}function m(e){let{...a}=e,t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...a,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function u(){let[e,a]=s.useState(c);return s.useEffect(()=>(l.push(a),()=>{let e=l.indexOf(a);e>-1&&l.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}}},e=>{var a=a=>e(e.s=a);e.O(0,[521,874,441,684,358],()=>a(1303)),_N_E=e.O()}]);
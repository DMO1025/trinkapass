(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[758],{283:(e,a,t)=>{"use strict";t.d(a,{A:()=>n,AuthProvider:()=>l});var r=t(5155),i=t(5695),s=t(2115);let o=(0,s.createContext)(void 0);function l(e){let{children:a}=e,[t,l]=(0,s.useState)(!1),[n,d]=(0,s.useState)(null),[c,m]=(0,s.useState)(!1),[u,p]=(0,s.useState)(null),[h,g]=(0,s.useState)(!0),f=(0,i.useRouter)(),x=(0,i.usePathname)();(0,s.useEffect)(()=>{g(!0);try{let e=localStorage.getItem("isAdminLoggedIn"),a=localStorage.getItem("adminUser");if("true"===e&&a){let e=JSON.parse(a);"admin"===e.tipo?(l(!0),d(e)):(localStorage.removeItem("isAdminLoggedIn"),localStorage.removeItem("adminUser"))}let t=localStorage.getItem("isOrganizerLoggedIn"),r=localStorage.getItem("organizerUser");if("true"===t&&r){let e=JSON.parse(r);"organizer"===e.tipo?(m(!0),p(e)):(localStorage.removeItem("isOrganizerLoggedIn"),localStorage.removeItem("organizerUser"))}}catch(e){console.error("Failed to access localStorage or parse auth data:",e),localStorage.removeItem("isAdminLoggedIn"),localStorage.removeItem("adminUser"),localStorage.removeItem("isOrganizerLoggedIn"),localStorage.removeItem("organizerUser")}g(!1)},[]);let v=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];try{localStorage.removeItem("isAdminLoggedIn"),localStorage.removeItem("adminUser")}catch(e){console.error("Failed to remove admin auth data from localStorage:",e)}l(!1),d(null),e&&x.startsWith("/admin")&&f.push("/login")},y=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];try{localStorage.removeItem("isOrganizerLoggedIn"),localStorage.removeItem("organizerUser")}catch(e){console.error("Failed to remove organizer auth data from localStorage:",e)}m(!1),p(null),e&&x.startsWith("/organizer")&&f.push("/login")};return(0,r.jsx)(o.Provider,{value:{isAdminLoggedIn:t,adminUser:n,setIsAdminLoggedIn:l,setAdminUser:d,adminLogin:e=>{if("admin"!==e.tipo){console.error("Attempted to log in non-admin user as admin.");return}try{localStorage.setItem("isAdminLoggedIn","true"),localStorage.setItem("adminUser",JSON.stringify(e))}catch(e){console.error("Failed to set admin auth data in localStorage:",e)}l(!0),d(e),y(!1)},adminLogout:v,isOrganizerLoggedIn:c,organizerUser:u,setIsOrganizerLoggedIn:m,setOrganizerUser:p,organizerLogin:e=>{if("organizer"!==e.tipo){console.error("Attempted to log in non-organizer user as organizer.");return}try{localStorage.setItem("isOrganizerLoggedIn","true"),localStorage.setItem("organizerUser",JSON.stringify(e))}catch(e){console.error("Failed to set organizer auth data in localStorage:",e)}m(!0),p(e),v(!1)},organizerLogout:y,isLoading:h},children:a})}function n(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1469:(e,a,t)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),!function(e,a){for(var t in a)Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}(a,{default:function(){return n},getImageProps:function(){return l}});let r=t(8229),i=t(8883),s=t(3063),o=r._(t(1193));function l(e){let{props:a}=(0,i.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!0,unoptimized:!1}});for(let[e,t]of Object.entries(a))void 0===t&&delete a[e];return{props:a}}let n=s.Image},2543:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(157).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5695:(e,a,t)=>{"use strict";var r=t(8999);t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}})},6160:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(157).A)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},6570:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(157).A)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},6694:(e,a,t)=>{Promise.resolve().then(t.bind(t,9547))},6766:(e,a,t)=>{"use strict";t.d(a,{default:()=>i.a});var r=t(1469),i=t.n(r)},7481:(e,a,t)=>{"use strict";t.d(a,{dj:()=>u});var r=t(2115);let i=0,s=new Map,o=e=>{if(s.has(e))return;let a=setTimeout(()=>{s.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,a)},l=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?o(t):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},n=[],d={toasts:[]};function c(e){d=l(d,e),n.forEach(e=>{e(d)})}function m(e){let{...a}=e,t=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...a,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function u(){let[e,a]=r.useState(d);return r.useEffect(()=>(n.push(a),()=>{let e=n.indexOf(a);e>-1&&n.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},9119:(e,a,t)=>{"use strict";t.d(a,{A:()=>r});let r=(0,t(157).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},9409:(e,a,t)=>{"use strict";t.d(a,{bq:()=>u,eb:()=>f,gC:()=>g,l6:()=>c,yv:()=>m});var r=t(5155),i=t(2115),s=t(1992),o=t(9556),l=t(7381),n=t(518),d=t(9434);let c=s.bL;s.YJ;let m=s.WT,u=i.forwardRef((e,a)=>{let{className:t,children:i,...l}=e;return(0,r.jsxs)(s.l9,{ref:a,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...l,children:[i,(0,r.jsx)(s.In,{asChild:!0,children:(0,r.jsx)(o.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=s.l9.displayName;let p=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,r.jsx)(s.PP,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...i,children:(0,r.jsx)(l.A,{className:"h-4 w-4"})})});p.displayName=s.PP.displayName;let h=i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,r.jsx)(s.wn,{ref:a,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",t),...i,children:(0,r.jsx)(o.A,{className:"h-4 w-4"})})});h.displayName=s.wn.displayName;let g=i.forwardRef((e,a)=>{let{className:t,children:i,position:o="popper",...l}=e;return(0,r.jsx)(s.ZL,{children:(0,r.jsxs)(s.UC,{ref:a,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===o&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:o,...l,children:[(0,r.jsx)(p,{}),(0,r.jsx)(s.LM,{className:(0,d.cn)("p-1","popper"===o&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:i}),(0,r.jsx)(h,{})]})})});g.displayName=s.UC.displayName,i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,r.jsx)(s.JU,{ref:a,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...i})}).displayName=s.JU.displayName;let f=i.forwardRef((e,a)=>{let{className:t,children:i,...o}=e;return(0,r.jsxs)(s.q7,{ref:a,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...o,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(s.VF,{children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})}),(0,r.jsx)(s.p4,{children:i})]})});f.displayName=s.q7.displayName,i.forwardRef((e,a)=>{let{className:t,...i}=e;return(0,r.jsx)(s.wv,{ref:a,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",t),...i})}).displayName=s.wv.displayName},9434:(e,a,t)=>{"use strict";t.d(a,{cn:()=>s});var r=t(2596),i=t(9688);function s(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,i.QP)((0,r.$)(a))}},9547:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>k});var r=t(5155),i=t(2177),s=t(221),o=t(5594),l=t(7481),n=t(5695),d=t(172),c=t(2543);let m=(0,t(157).A)("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);var u=t(6160),p=t(6570),h=t(9119),g=t(2115),f=t(283),x=t(4477);let v=(0,x.createServerReference)("603a0663225329c0e51826ee0f8352d34ac95a7b76",x.callServer,void 0,x.findSourceMapURL,"updateOrganizerSettingsAction");var y=t(6766),_=t(9409),b=t(9434);let j="__EMPTY_SELECTION__",N=o.k5(["cpf","cnpj","email","phone","random",""],{errorMap:()=>({message:"Selecione um tipo de chave PIX v\xe1lido."})}),S=o.Ik({pix_key_type:N.optional(),pix_key:o.Yj().optional(),id_photo_data_uri:o.Yj().optional().refine(e=>!e||e.startsWith("data:image/"),{message:"Formato de imagem inv\xe1lido. Use o upload."})}).refine(e=>(!e.pix_key_type||""===e.pix_key_type||!!e.pix_key)&&(!e.pix_key||!!e.pix_key_type&&""!==e.pix_key_type),{message:"Se voc\xea fornecer uma Chave PIX, o Tipo da Chave PIX tamb\xe9m \xe9 obrigat\xf3rio, e vice-versa.",path:["pix_key"]});function k(){let{toast:e}=(0,l.dj)(),a=(0,n.useRouter)(),{organizerUser:t,organizerLogin:o,isLoading:x}=(0,f.A)(),[N,k]=(0,g.useState)(!1),[I,A]=(0,g.useState)(null),{register:w,handleSubmit:z,control:P,formState:{errors:C},reset:O,setValue:E,setError:T,watch:L}=(0,i.mN)({resolver:(0,s.u)(S),defaultValues:{pix_key_type:"",pix_key:"",id_photo_data_uri:""}});if((0,g.useEffect)(()=>{!x&&t?(O({pix_key_type:t.pix_key_type||"",pix_key:t.pix_key||"",id_photo_data_uri:t.id_photo_data_uri||""}),t.id_photo_data_uri?A(t.id_photo_data_uri):A(null)):x||t||a.replace("/login?redirect=/organizer/dashboard")},[x,t,O,a]),x||!t)return(0,r.jsxs)("div",{className:"d-flex align-items-center justify-content-center vh-100",children:[(0,r.jsx)(d.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,r.jsx)("p",{className:"ms-2",children:"Carregando configura\xe7\xf5es..."})]});let M=async a=>{if(!(null==t?void 0:t.id)){e({title:"Erro de Autentica\xe7\xe3o",description:"ID do organizador n\xe3o encontrado.",variant:"destructive"});return}k(!0);let r={pix_key_type:a.pix_key_type,pix_key:a.pix_key||void 0,id_photo_data_uri:a.id_photo_data_uri||void 0},i=await v(t.id,r);k(!1),i.success&&i.user?(e({title:"Configura\xe7\xf5es Atualizadas!",description:i.message||"Suas informa\xe7\xf5es de saque e verifica\xe7\xe3o foram atualizadas.",variant:"default"}),o(i.user)):e({title:"Falha ao Atualizar Configura\xe7\xf5es",description:i.message,variant:"destructive"})};return(0,r.jsxs)("div",{className:"container-fluid container-md py-4 py-md-5",style:{maxWidth:"720px"},children:[(0,r.jsxs)("button",{onClick:()=>a.push("/organizer/dashboard"),className:"btn btn-secondary mb-4 d-flex align-items-center gap-2",children:[(0,r.jsx)(c.A,{className:"me-2 h-4 w-4"})," Voltar para o Painel"]}),(0,r.jsxs)("div",{className:"card border",children:[" ",(0,r.jsxs)("div",{className:"card-header p-3 p-md-4 bg-light",children:[(0,r.jsxs)("h1",{className:"card-title fs-2 fw-bold text-primary d-flex align-items-center gap-2",children:[(0,r.jsx)(m,{className:"h-8 w-8"})," Configura\xe7\xf5es de Saque e Verifica\xe7\xe3o"]}),(0,r.jsx)("p",{className:"card-text text-muted",children:"Defina sua chave PIX para recebimentos e envie sua documenta\xe7\xe3o para verifica\xe7\xe3o."})]}),(0,r.jsx)("div",{className:"card-body p-3 p-md-4",children:(0,r.jsxs)("form",{onSubmit:z(M),className:"needs-validation",noValidate:!0,children:[(0,r.jsxs)("div",{className:"card p-3 p-md-4 mb-4 border-primary-subtle",children:[(0,r.jsxs)("h3",{className:"fs-5 fw-semibold text-primary mb-3 d-flex align-items-center gap-2",children:[(0,r.jsx)(u.A,{})," Chave PIX para Recebimento"]}),(0,r.jsxs)("div",{className:"vstack gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"pix_key_type",className:"form-label",children:"Tipo da Chave PIX"}),(0,r.jsx)(i.xI,{name:"pix_key_type",control:P,render:e=>{let{field:a}=e;return(0,r.jsxs)(_.l6,{onValueChange:e=>a.onChange(e===j?"":e),value:""===a.value||void 0===a.value?j:a.value,children:[(0,r.jsx)(_.bq,{id:"pix_key_type",className:(0,b.cn)("form-select",C.pix_key_type&&"is-invalid"),children:(0,r.jsx)(_.yv,{placeholder:"Selecione o tipo da chave"})}),(0,r.jsxs)(_.gC,{children:[(0,r.jsx)(_.eb,{value:j,children:"Nenhum (Limpar)"}),(0,r.jsx)(_.eb,{value:"cpf",children:"CPF"}),(0,r.jsx)(_.eb,{value:"cnpj",children:"CNPJ"}),(0,r.jsx)(_.eb,{value:"email",children:"E-mail"}),(0,r.jsx)(_.eb,{value:"phone",children:"Telefone"}),(0,r.jsx)(_.eb,{value:"random",children:"Chave Aleat\xf3ria"})]})]})}}),C.pix_key_type&&(0,r.jsx)("div",{className:"invalid-feedback d-block",children:C.pix_key_type.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"pix_key",className:"form-label",children:"Chave PIX"}),(0,r.jsx)("input",{id:"pix_key",...w("pix_key"),className:"form-control ".concat(C.pix_key?"is-invalid":""),placeholder:"Sua chave PIX"}),C.pix_key&&(0,r.jsx)("div",{className:"invalid-feedback",children:C.pix_key.message})]})]}),C.root&&(0,r.jsx)("div",{className:"text-danger small mt-1",children:C.root.message})]}),(0,r.jsxs)("div",{className:"card p-3 p-md-4 mb-4 border-accent-subtle",children:[(0,r.jsxs)("h3",{className:"fs-5 fw-semibold text-accent mb-3 d-flex align-items-center gap-2",children:[(0,r.jsx)(p.A,{})," Verifica\xe7\xe3o de Identidade (Demonstra\xe7\xe3o)"]}),(0,r.jsx)("p",{className:"small text-muted mb-3",children:"Para sua seguran\xe7a e conformidade, em um sistema real, seria necess\xe1rio verificar sua identidade. Esta \xe9 uma simula\xe7\xe3o. Envie uma foto sua segurando seu documento de RG ou CNH (ou clique em limpar para remover)."}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"id_photo_upload",className:"form-label",children:["Foto segurando o Documento (M\xe1x ",5,"MB)"]}),(0,r.jsxs)("div",{className:"input-group mb-2",children:[(0,r.jsx)("input",{id:"id_photo_upload",type:"file",accept:"image/png, image/jpeg, image/webp",onChange:e=>{var a;let r=null===(a=e.target.files)||void 0===a?void 0:a[0];if(r){if(r.size>5242880){T("id_photo_data_uri",{message:"Arquivo muito grande. M\xe1ximo ".concat(5,"MB.")}),e.target.value="";return}let a=new FileReader;a.onloadend=()=>{let e=a.result;E("id_photo_data_uri",e,{shouldValidate:!0}),A(e)},a.readAsDataURL(r)}else E("id_photo_data_uri",(null==t?void 0:t.id_photo_data_uri)||"",{shouldValidate:!0}),A((null==t?void 0:t.id_photo_data_uri)||null)},className:"form-control ".concat(C.id_photo_data_uri?"is-invalid":"")}),(0,r.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{E("id_photo_data_uri","",{shouldValidate:!0}),A(null);let e=document.getElementById("id_photo_upload");e&&(e.value="")},children:"Limpar"}),C.id_photo_data_uri&&(0,r.jsx)("div",{className:"invalid-feedback w-100",children:C.id_photo_data_uri.message})]}),I&&(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("label",{className:"form-label small",children:"Pr\xe9-visualiza\xe7\xe3o:"}),(0,r.jsx)(y.default,{src:I,alt:"Pr\xe9-visualiza\xe7\xe3o do documento",width:200,height:150,className:"img-thumbnail object-fit-contain mt-1 bg-light","data-ai-hint":"identity document preview"})]}),(0,r.jsxs)("p",{className:"form-text small mt-2",children:[(0,r.jsx)("strong",{children:"Aten\xe7\xe3o:"})," Em uma aplica\xe7\xe3o real, esta imagem seria enviada para um servidor seguro para verifica\xe7\xe3o. N\xe3o envie documentos reais neste ambiente de demonstra\xe7\xe3o."]})]})]}),(0,r.jsxs)("button",{type:"submit",className:"btn btn-primary w-100 btn-lg fw-semibold d-flex align-items-center justify-content-center gap-2",disabled:N,children:[N?(0,r.jsx)(d.A,{className:"me-2 h-4 w-4 animate-spin"}):(0,r.jsx)(h.A,{className:"me-2 h-4 w-4"}),"Salvar Configura\xe7\xf5es"]})]})})]})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[521,63,277,688,152,200,441,684,358],()=>a(6694)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[122],{283:(e,a,t)=>{"use strict";t.d(a,{A:()=>l,AuthProvider:()=>i});var s=t(5155),r=t(5695),o=t(2115);let n=(0,o.createContext)(void 0);function i(e){let{children:a}=e,[t,i]=(0,o.useState)(!1),[l,c]=(0,o.useState)(null),[d,m]=(0,o.useState)(!1),[u,g]=(0,o.useState)(null),[h,f]=(0,o.useState)(!0),p=(0,r.useRouter)(),v=(0,r.usePathname)();(0,o.useEffect)(()=>{f(!0);try{let e=localStorage.getItem("isAdminLoggedIn"),a=localStorage.getItem("adminUser");if("true"===e&&a){let e=JSON.parse(a);"admin"===e.tipo?(i(!0),c(e)):(localStorage.removeItem("isAdminLoggedIn"),localStorage.removeItem("adminUser"))}let t=localStorage.getItem("isOrganizerLoggedIn"),s=localStorage.getItem("organizerUser");if("true"===t&&s){let e=JSON.parse(s);"organizer"===e.tipo?(m(!0),g(e)):(localStorage.removeItem("isOrganizerLoggedIn"),localStorage.removeItem("organizerUser"))}}catch(e){console.error("Failed to access localStorage or parse auth data:",e),localStorage.removeItem("isAdminLoggedIn"),localStorage.removeItem("adminUser"),localStorage.removeItem("isOrganizerLoggedIn"),localStorage.removeItem("organizerUser")}f(!1)},[]);let S=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];try{localStorage.removeItem("isAdminLoggedIn"),localStorage.removeItem("adminUser")}catch(e){console.error("Failed to remove admin auth data from localStorage:",e)}i(!1),c(null),e&&v.startsWith("/admin")&&p.push("/login")},A=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];try{localStorage.removeItem("isOrganizerLoggedIn"),localStorage.removeItem("organizerUser")}catch(e){console.error("Failed to remove organizer auth data from localStorage:",e)}m(!1),g(null),e&&v.startsWith("/organizer")&&p.push("/login")};return(0,s.jsx)(n.Provider,{value:{isAdminLoggedIn:t,adminUser:l,setIsAdminLoggedIn:i,setAdminUser:c,adminLogin:e=>{if("admin"!==e.tipo){console.error("Attempted to log in non-admin user as admin.");return}try{localStorage.setItem("isAdminLoggedIn","true"),localStorage.setItem("adminUser",JSON.stringify(e))}catch(e){console.error("Failed to set admin auth data in localStorage:",e)}i(!0),c(e),A(!1)},adminLogout:S,isOrganizerLoggedIn:d,organizerUser:u,setIsOrganizerLoggedIn:m,setOrganizerUser:g,organizerLogin:e=>{if("organizer"!==e.tipo){console.error("Attempted to log in non-organizer user as organizer.");return}try{localStorage.setItem("isOrganizerLoggedIn","true"),localStorage.setItem("organizerUser",JSON.stringify(e))}catch(e){console.error("Failed to set organizer auth data in localStorage:",e)}m(!0),g(e),S(!1)},organizerLogout:A,isLoading:h},children:a})}function l(){let e=(0,o.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1949:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(157).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2543:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(157).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3909:(e,a,t)=>{Promise.resolve().then(t.bind(t,7357))},5695:(e,a,t)=>{"use strict";var s=t(8999);t.o(s,"useParams")&&t.d(a,{useParams:function(){return s.useParams}}),t.o(s,"usePathname")&&t.d(a,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}})},7357:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>x});var s=t(5155),r=t(2177),o=t(221),n=t(5594),i=t(7481),l=t(5695),c=t(172),d=t(2543),m=t(8271),u=t(9119),g=t(1949),h=t(2115),f=t(283),p=t(4477);let v=(0,p.createServerReference)("00ac0ce8ef406b3b916ac83e4c85aeb0a05e1b467c",p.callServer,void 0,p.findSourceMapURL,"getMercadoPagoSettingsAction"),S=(0,p.createServerReference)("4085c18d54795c6563c7af2d858762b40ca468e2fe",p.callServer,void 0,p.findSourceMapURL,"updateMercadoPagoSettingsAction"),A=n.Ik({mercadoPagoAccessToken:n.Yj().min(1,{message:"Access Token do Mercado Pago \xe9 obrigat\xf3rio."})});function x(){let{toast:e}=(0,i.dj)(),a=(0,l.useRouter)(),{adminUser:t,isLoading:n}=(0,f.A)(),[p,x]=(0,h.useState)(!1),[b,I]=(0,h.useState)(!0),{register:y,handleSubmit:T,formState:{errors:N},reset:k}=(0,r.mN)({resolver:(0,o.u)(A),defaultValues:{mercadoPagoAccessToken:""}});if((0,h.useEffect)(()=>{n||t?t&&async function(){I(!0);try{let e=await v();e.mercadoPagoAccessToken&&k({mercadoPagoAccessToken:e.mercadoPagoAccessToken})}catch(a){console.error("Failed to load settings:",a),e({title:"Erro ao Carregar Configura\xe7\xf5es",description:"N\xe3o foi poss\xedvel carregar as configura\xe7\xf5es atuais.",variant:"destructive"})}finally{I(!1)}}():a.replace("/login?redirect=/admin/dashboard")},[n,t,k,a,e]),n||b)return(0,s.jsxs)("div",{className:"d-flex align-items-center justify-content-center min-vh-100",children:[(0,s.jsx)(c.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,s.jsx)("p",{className:"ms-2",children:"Carregando configura\xe7\xf5es..."})]});if(!t)return null;let j=async a=>{x(!0);let t=await S(a.mercadoPagoAccessToken);x(!1),t.success?e({title:"Configura\xe7\xf5es Atualizadas!",description:t.message,variant:"default"}):e({title:"Falha ao Atualizar",description:t.message,variant:"destructive"})};return(0,s.jsxs)("div",{className:"container-fluid container-md py-4 py-md-5",style:{maxWidth:"720px"},children:[(0,s.jsxs)("button",{onClick:()=>a.push("/admin/dashboard"),className:"btn btn-secondary mb-4 d-flex align-items-center gap-2",children:[(0,s.jsx)(d.A,{className:"me-2 h-4 w-4"})," Voltar para o Painel"]}),(0,s.jsxs)("div",{className:"card border",children:[" ",(0,s.jsxs)("div",{className:"card-header p-3 p-md-4 bg-light",children:[(0,s.jsxs)("h1",{className:"card-title fs-2 fw-bold text-primary d-flex align-items-center gap-2",children:[(0,s.jsx)(m.A,{className:"h-8 w-8"})," Configura\xe7\xf5es da Plataforma"]}),(0,s.jsx)("p",{className:"card-text text-muted",children:"Gerencie as integra\xe7\xf5es e configura\xe7\xf5es da plataforma."})]}),(0,s.jsx)("div",{className:"card-body p-3 p-md-4",children:(0,s.jsxs)("form",{onSubmit:T(j),className:"needs-validation",noValidate:!0,children:[(0,s.jsxs)("div",{className:"card p-3 p-md-4 mb-4 border-primary-subtle",children:[(0,s.jsx)("h3",{className:"fs-5 fw-semibold text-primary mb-1",children:"Integra\xe7\xe3o Mercado Pago"}),(0,s.jsx)("p",{className:"small text-muted mb-3",children:"Configure o Access Token para processar pagamentos via PIX com o Mercado Pago."}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"mercadoPagoAccessToken",className:"form-label",children:"Access Token do Mercado Pago"}),(0,s.jsx)("input",{id:"mercadoPagoAccessToken",type:"password",...y("mercadoPagoAccessToken"),className:"form-control ".concat(N.mercadoPagoAccessToken?"is-invalid":""),placeholder:"Cole seu Access Token aqui"}),N.mercadoPagoAccessToken&&(0,s.jsx)("div",{className:"invalid-feedback",children:N.mercadoPagoAccessToken.message}),(0,s.jsx)("div",{className:"form-text small",children:"Este token \xe9 sens\xedvel. Certifique-se de obt\xea-lo de um ambiente seguro."})]})]}),(0,s.jsxs)("button",{type:"submit",className:"btn btn-primary w-100 btn-lg fw-semibold d-flex align-items-center justify-content-center gap-2",disabled:p,children:[p?(0,s.jsx)(c.A,{className:"me-2 h-4 w-4 animate-spin"}):(0,s.jsx)(u.A,{className:"me-2 h-4 w-4"}),"Salvar Configura\xe7\xf5es"]})]})})]}),(0,s.jsx)("div",{className:"card mt-4 border-danger-subtle bg-danger-subtle",children:(0,s.jsxs)("div",{className:"card-body d-flex align-items-start gap-3 p-3",children:[(0,s.jsx)(g.A,{className:"h-5 w-5 text-danger mt-1 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"fw-semibold text-danger small",children:"Aten\xe7\xe3o: Seguran\xe7a dos Tokens"}),(0,s.jsx)("p",{className:"small text-dark mb-0",children:"Access Tokens e chaves de API s\xe3o informa\xe7\xf5es sens\xedveis. Em um ambiente de produ\xe7\xe3o real, eles devem ser gerenciados atrav\xe9s de vari\xe1veis de ambiente seguras no servidor ou servi\xe7os de gerenciamento de segredos, e n\xe3o armazenados diretamente em arquivos de configura\xe7\xe3o versionados ou edit\xe1veis por uma interface de usu\xe1rio desta forma. Esta interface \xe9 para fins de demonstra\xe7\xe3o."})]})]})})]})}},7481:(e,a,t)=>{"use strict";t.d(a,{dj:()=>u});var s=t(2115);let r=0,o=new Map,n=e=>{if(o.has(e))return;let a=setTimeout(()=>{o.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,a)},i=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?n(t):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},l=[],c={toasts:[]};function d(e){c=i(c,e),l.forEach(e=>{e(c)})}function m(e){let{...a}=e,t=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...a,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function u(){let[e,a]=s.useState(c);return s.useEffect(()=>(l.push(a),()=>{let e=l.indexOf(a);e>-1&&l.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},8271:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(157).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9119:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(157).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])}},e=>{var a=a=>e(e.s=a);e.O(0,[521,441,684,358],()=>a(3909)),_N_E=e.O()}]);
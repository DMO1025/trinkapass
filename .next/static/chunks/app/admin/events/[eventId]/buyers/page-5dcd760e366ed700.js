(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{157:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var r=a(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:d="",children:i,iconNode:m,...u}=e;return(0,r.createElement)("svg",{ref:t,...l,width:s,height:s,stroke:a,strokeWidth:c?24*Number(o)/Number(s):o,className:n("lucide",d),...u},[...m.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(i)?i:[i]])}),c=(e,t)=>{let a=(0,r.forwardRef)((a,l)=>{let{className:c,...d}=a;return(0,r.createElement)(o,{ref:l,iconNode:t,className:n("lucide-".concat(s(e)),c),...d})});return a.displayName="".concat(e),a}},172:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},283:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,AuthProvider:()=>o});var r=a(5155),s=a(5695),n=a(2115);let l=(0,n.createContext)(void 0);function o(e){let{children:t}=e,[a,o]=(0,n.useState)(!1),[c,d]=(0,n.useState)(null),[i,m]=(0,n.useState)(!1),[u,h]=(0,n.useState)(null),[g,p]=(0,n.useState)(!0),x=(0,s.useRouter)(),f=(0,s.usePathname)();(0,n.useEffect)(()=>{p(!0);try{let e=localStorage.getItem("isAdminLoggedIn"),t=localStorage.getItem("adminUser");if("true"===e&&t){let e=JSON.parse(t);"admin"===e.tipo?(o(!0),d(e)):(localStorage.removeItem("isAdminLoggedIn"),localStorage.removeItem("adminUser"))}let a=localStorage.getItem("isOrganizerLoggedIn"),r=localStorage.getItem("organizerUser");if("true"===a&&r){let e=JSON.parse(r);"organizer"===e.tipo?(m(!0),h(e)):(localStorage.removeItem("isOrganizerLoggedIn"),localStorage.removeItem("organizerUser"))}}catch(e){console.error("Failed to access localStorage or parse auth data:",e),localStorage.removeItem("isAdminLoggedIn"),localStorage.removeItem("adminUser"),localStorage.removeItem("isOrganizerLoggedIn"),localStorage.removeItem("organizerUser")}p(!1)},[]);let v=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];try{localStorage.removeItem("isAdminLoggedIn"),localStorage.removeItem("adminUser")}catch(e){console.error("Failed to remove admin auth data from localStorage:",e)}o(!1),d(null),e&&f.startsWith("/admin")&&x.push("/login")},y=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];try{localStorage.removeItem("isOrganizerLoggedIn"),localStorage.removeItem("organizerUser")}catch(e){console.error("Failed to remove organizer auth data from localStorage:",e)}m(!1),h(null),e&&f.startsWith("/organizer")&&x.push("/login")};return(0,r.jsx)(l.Provider,{value:{isAdminLoggedIn:a,adminUser:c,setIsAdminLoggedIn:o,setAdminUser:d,adminLogin:e=>{if("admin"!==e.tipo){console.error("Attempted to log in non-admin user as admin.");return}try{localStorage.setItem("isAdminLoggedIn","true"),localStorage.setItem("adminUser",JSON.stringify(e))}catch(e){console.error("Failed to set admin auth data in localStorage:",e)}o(!0),d(e),y(!1)},adminLogout:v,isOrganizerLoggedIn:i,organizerUser:u,setIsOrganizerLoggedIn:m,setOrganizerUser:h,organizerLogin:e=>{if("organizer"!==e.tipo){console.error("Attempted to log in non-organizer user as organizer.");return}try{localStorage.setItem("isOrganizerLoggedIn","true"),localStorage.setItem("organizerUser",JSON.stringify(e))}catch(e){console.error("Failed to set organizer auth data in localStorage:",e)}m(!0),h(e),v(!1)},organizerLogout:y,isLoading:g},children:t})}function c(){let e=(0,n.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},286:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},1057:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(4477);let s=(0,r.createServerReference)("40fe749a8391e6528facea5a25513e9e6e91d9b012",r.callServer,void 0,r.findSourceMapURL,"getEventById")},1949:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2543:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3672:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},4394:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("Ticket",[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]])},4477:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{callServer:function(){return r.callServer},createServerReference:function(){return n},findSourceMapURL:function(){return s.findSourceMapURL}});let r=a(3806),s=a(1818),n=a(4979).createServerReference},5024:(e,t,a)=>{Promise.resolve().then(a.bind(a,5611))},5611:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var r=a(5155),s=a(2115),n=a(5695),l=a(1057),o=a(9918),c=a(283),d=a(9940),i=a(7118),m=a(8184),u=a(172),h=a(1949),g=a(2543),p=a(286),x=a(3672),f=a(4394);function v(){let e=(0,n.useParams)().eventId,t=(0,n.useRouter)(),{adminUser:a,isLoading:v}=(0,c.A)(),[y,j]=(0,s.useState)(null),[N,A]=(0,s.useState)([]),[S,b]=(0,s.useState)(!0),[w,k]=(0,s.useState)(null);(0,s.useEffect)(()=>{async function r(){if(e&&a){b(!0),k(null);try{let t=await (0,l.Z)(e);if(!t){k("Evento n\xe3o encontrado."),j(null),A([]),b(!1);return}j(t);let a=await (0,o.B)(e);A(a)}catch(e){console.error("Failed to fetch event/sales data for admin:",e),k("N\xe3o foi poss\xedvel carregar os dados dos compradores. Tente novamente.")}finally{b(!1)}}}!v&&a?r():v||a||t.replace("/login?redirect=/admin/dashboard")},[e,a,v,t]);let I=e=>{switch(e){case"paid":return"bg-success text-white";case"pending_payment":return"bg-warning text-dark";case"failed":return"bg-danger text-white";case"cancelled":return"bg-secondary text-white";default:return"bg-light text-dark border"}},z=e=>{switch(e){case"paid":return(0,r.jsx)(d.A,{className:"me-1 h-3 w-3"});case"pending_payment":return(0,r.jsx)(i.A,{className:"me-1 h-3 w-3"});case"failed":case"cancelled":return(0,r.jsx)(m.A,{className:"me-1 h-3 w-3"});default:return null}},L=e=>{switch(e){case"paid":return"Pago";case"pending_payment":return"Pendente";case"failed":return"Falhou";case"cancelled":return"Cancelado";default:return e}};return v||S?(0,r.jsxs)("div",{className:"d-flex align-items-center justify-content-center vh-100",children:[(0,r.jsx)(u.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,r.jsx)("p",{className:"ms-3 fs-5 text-muted",children:"Carregando informa\xe7\xf5es dos compradores..."})]}):w?(0,r.jsxs)("div",{className:"text-center py-5",children:[(0,r.jsx)(h.A,{className:"mx-auto h-12 w-12 text-danger"}),(0,r.jsx)("h2",{className:"mt-4 fs-2 fw-semibold text-danger",children:"Erro"}),(0,r.jsx)("p",{className:"mt-2 text-muted",children:w}),(0,r.jsxs)("button",{onClick:()=>t.push("/admin/dashboard"),className:"btn btn-secondary mt-4 d-flex align-items-center gap-2 mx-auto",children:[(0,r.jsx)(g.A,{className:"me-2 h-4 w-4"})," Voltar para o Painel de Admin"]})]}):y?(0,r.jsxs)("div",{className:"container-fluid container-lg py-4",children:[(0,r.jsxs)("button",{onClick:()=>t.push("/admin/dashboard"),className:"btn btn-secondary mb-4 d-flex align-items-center gap-2",children:[(0,r.jsx)(g.A,{className:"me-2 h-4 w-4"})," Voltar para o Painel de Admin"]}),(0,r.jsxs)("div",{className:"card border",children:[(0,r.jsxs)("div",{className:"card-header p-3 p-md-4 bg-light",children:[(0,r.jsxs)("h1",{className:"card-title fs-2 fw-bold text-primary d-flex align-items-center gap-2",children:[(0,r.jsx)(p.A,{className:"h-7 w-7 md:h-8 md:w-8"})," Lista de Compradores (Admin)"]}),(0,r.jsxs)("p",{className:"card-text text-muted",children:["Compradores para o evento: ",(0,r.jsx)("span",{className:"fw-semibold text-dark",children:y.nome_evento})]})]}),(0,r.jsx)("div",{className:"card-body p-0 p-md-2",children:N.length>0?(0,r.jsx)("div",{className:"table-responsive",children:(0,r.jsxs)("table",{className:"table table-hover table-striped align-middle mb-0",children:[(0,r.jsx)("thead",{className:"table-light",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",children:"Nome"}),(0,r.jsx)("th",{scope:"col",children:"E-mail"}),(0,r.jsx)("th",{scope:"col",children:"WhatsApp"}),(0,r.jsx)("th",{scope:"col",className:"text-center",children:"Ingressos"}),(0,r.jsx)("th",{scope:"col",className:"text-end",children:"Pre\xe7o Un. (Org)"}),(0,r.jsx)("th",{scope:"col",className:"text-end",children:"Taxa Serv. Un."}),(0,r.jsx)("th",{scope:"col",className:"text-end",children:"Valor Total (Venda)"}),(0,r.jsx)("th",{scope:"col",children:"Data da Compra"}),(0,r.jsx)("th",{scope:"col",children:"ID Pag. MP"}),(0,r.jsx)("th",{scope:"col",className:"text-center",children:"Status"}),(0,r.jsx)("th",{scope:"col",className:"text-center",children:"Contato"})]})}),(0,r.jsx)("tbody",{children:N.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"fw-medium",children:e.nome_comprador}),(0,r.jsx)("td",{children:e.email_comprador}),(0,r.jsx)("td",{children:e.whatsapp}),(0,r.jsx)("td",{className:"text-center",children:e.quantidade}),(0,r.jsxs)("td",{className:"text-end",children:["R$ ",e.preco_ingresso_unitario.toFixed(2).replace(".",",")]}),(0,r.jsxs)("td",{className:"text-end",children:["R$ ",e.taxa_servico_unitaria.toFixed(2).replace(".",",")]}),(0,r.jsxs)("td",{className:"text-end fw-bold",children:["R$ ",e.valor_total_compra.toFixed(2).replace(".",",")]}),(0,r.jsx)("td",{children:new Date(e.data_compra).toLocaleString("pt-BR")}),(0,r.jsx)("td",{children:e.mp_payment_id||"-"}),(0,r.jsx)("td",{className:"text-center",children:(0,r.jsxs)("span",{className:"badge small ".concat(I(e.status)," d-inline-flex align-items-center"),children:[z(e.status)," ",L(e.status)]})}),(0,r.jsx)("td",{className:"text-center",children:e.whatsapp?(0,r.jsxs)("a",{href:"https://wa.me/55".concat(e.whatsapp.replace(/\D/g,"")),target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-success d-inline-flex align-items-center gap-1",children:[(0,r.jsx)(x.A,{className:"h-4 w-4"})," Abrir"]}):"-"})]},e.id))})]})}):(0,r.jsxs)("div",{className:"text-center py-5",children:[(0,r.jsx)(f.A,{className:"mx-auto h-12 w-12 text-muted"}),(0,r.jsx)("p",{className:"mt-4 fs-5 text-muted",children:"Ainda n\xe3o h\xe1 compradores para este evento."})]})})]})]}):(0,r.jsxs)("div",{className:"text-center py-5",children:[(0,r.jsx)(h.A,{className:"mx-auto h-12 w-12 text-muted"}),(0,r.jsx)("h2",{className:"mt-4 fs-2 fw-semibold",children:"Evento N\xe3o Encontrado"}),(0,r.jsxs)("button",{onClick:()=>t.push("/admin/dashboard"),className:"btn btn-secondary mt-4 d-flex align-items-center gap-2 mx-auto",children:[(0,r.jsx)(g.A,{className:"me-2 h-4 w-4"})," Voltar para o Painel de Admin"]})]})}},5695:(e,t,a)=>{"use strict";var r=a(8999);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}})},7118:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("BadgeAlert",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},8184:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("BadgeX",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["line",{x1:"15",x2:"9",y1:"9",y2:"15",key:"f7djnv"}],["line",{x1:"9",x2:"15",y1:"9",y2:"15",key:"1shsy8"}]])},9918:(e,t,a)=>{"use strict";a.d(t,{B:()=>s});var r=a(4477);let s=(0,r.createServerReference)("40cef2ed129f2e4ae69d23a580670158fca0857dda",r.callServer,void 0,r.findSourceMapURL,"getSalesByEventId")},9940:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(5024)),_N_E=e.O()}]);